#include <gtest/gtest.h>
#include "matrix_utils.h"

TEST(MatrixTest, CreateMatrix) {
    const int rows = 3, cols = 3;
    int* mat[rows];
    for(int i = 0; i < rows; ++i) mat[i] = new int[cols];

    Create(mat, rows, cols, -5, 5);
    for(int i = 0; i < rows; ++i)
        for(int j = 0; j < cols; ++j) {
            EXPECT_GE(mat[i][j], -5);
            EXPECT_LE(mat[i][j], 5);
        }

    for(int i = 0; i < rows; ++i) delete[] mat[i];
}

TEST(MatrixTest, CalcMatrix) {
    int mat[2][2] = {{2, 3}, {4, 7}};
    int* ptrs[2] = {mat[0], mat[1]};
    int sumEven, sumNotDiv7;
    Calc(ptrs, 2, 2, sumEven, sumNotDiv7);
    EXPECT_EQ(sumEven, 6); // 2 + 4
    EXPECT_EQ(sumNotDiv7, 9); // 2 + 3 + 4
}

TEST(MatrixTest, SortColsMatrix) {
    int mat[2][2] = {{4, 1}, {2, 3}};
    int* ptrs[2] = {mat[0], mat[1]};
    SortCols(ptrs, 2, 2);
    EXPECT_EQ(mat[0][0], 2);
    EXPECT_EQ(mat[1][0], 4);
    EXPECT_EQ(mat[0][1], 1);
    EXPECT_EQ(mat[1][1], 3);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
